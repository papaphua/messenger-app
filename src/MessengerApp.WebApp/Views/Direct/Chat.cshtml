@model MessengerApp.Application.Dtos.Direct.DirectDto

<div class="container mt-4">
    <h1>Direct</h1>

    <h2>Profile Information</h2>
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col">
                    <h5 class="card-title">Profile Information</h5>
                    <p class="card-text">
                        <strong>Username:</strong> @Model.ProfileInfoDto.UserName
                    </p>
                    <p class="card-text">
                        <strong>First Name:</strong> @Model.ProfileInfoDto.FirstName
                    </p>
                    <p class="card-text">
                        <strong>Last Name:</strong> @Model.ProfileInfoDto.LastName
                    </p>
                    <p class="card-text">
                        <strong>Biography:</strong> @Model.ProfileInfoDto.Biography
                    </p>
                </div>
                <div class="col">
                    @if (Model.ProfilePictureBytes != null)
                    {
                        <img class="profile-picture" src="data:image/jpeg;base64,@Convert.ToBase64String(Model.ProfilePictureBytes)" alt="Profile Picture"/>
                    }
                    else
                    {
                        <div class="empty-circle"></div>
                    }
                </div>
            </div>
        </div>
    </div>

    <form method="post" asp-controller="Direct" asp-action="CreateDirectMessage">
        <div class="form-group">
            <input type="hidden" name="directId" value="@Model.Id">
            <label for="Content">Message:</label>
            <textarea class="form-control" id="Content" name="CreateMessageDto.Content" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Send Message</button>
    </form>

    @* TODO attachments, reactions *@
    <h2>Messages</h2>
    @foreach (var message in Model.Messages)
    {
        <div class="card mt-3">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title">Message</h5>
                        <p class="card-text">
                            <strong>Sender:</strong> @message.Sender.UserName
                        </p>
                        <p class="card-text">
                            <strong>Content:</strong> @message.Content
                        </p>
                        <p class="card-text">
                            <strong>Timestamp:</strong> @message.Timestamp
                        </p>
                    </div>
                    <div class="col">
                        @if (message.Sender.ProfilePictureBytes != null)
                        {
                            <img class="profile-picture" src="data:image/jpeg;base64,@Convert.ToBase64String(message.Sender.ProfilePictureBytes)" alt="Profile Picture"/>
                        }
                        else
                        {
                            <div class="empty-circle"></div>
                        }
                    </div>
                </div>
            </div>
        </div>
    }
</div>